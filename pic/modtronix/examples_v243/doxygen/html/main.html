<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Example Projects: Main Page</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li id="current"><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>Main Page</h1>
<p>
<h3 align="center">2.43 </h3><ul>
<li><a class="el" href="main.html#page_examples_introduction">Introduction</a></li><li><a class="el" href="main.html#page_examples_tools">Program Versions</a></li><li><a class="el" href="main.html#page_examples_target">Specifying the target board and PIC device</a></li><li><a class="el" href="main.html#page_examples_bootloader_compile">Compiling code for the Bootloader</a></li><li><a class="el" href="main.html#page_examples_bootloader_compile_non">Compiling code for use without Bootloader</a></li><li><a class="el" href="main.html#page_examples_firmware_netloader">Programming a board with a bootloader</a></li><li><a class="el" href="main.html#page_examples_firmware_programer">Programming a board without a bootloader</a></li><li><a class="el" href="main.html#page_update_webpages">Modifying And Updating The Web Pages</a></li></ul>
<h2><a class="anchor" name="page_examples_introduction">
Introduction</a></h2>
This download contains example projects for using the Modtronix TCP/IP Stack with different target boards and compilers. Each folder contains one or more <a class="el" href="tools.html#tools_mplab">MPLAB IDE</a> example project.<p>
All examples are supplied with <em>"*.mcp"</em> <a class="el" href="tools.html#tools_mplab">MPLAB IDE</a> project files (in "src" folder of example folder). To compile the project, simply install the <a class="el" href="tools.html#tools_mplab">MPLAB IDE</a> and a compiler, open the project in MPLAB, select the PIC chip in MPLAB ("Configure", "Select Device..." menu) and click on the "Build All" toolbar button. This will compile the whole project and create the hex file.<p>
The name of the MPLAB project file indicates the following:<ul>
<li>What project it will compile</li><li>For what target device the project is compiled</li><li>What compiler is used</li><li>If it creates code for a board with or without a bootloader</li></ul>
<p>
The name of the MPLAB project file has the following format: <em>projectname_target_bootloader_compiler.mcp</em><ul>
<li>The <em>projectname</em> part gives the name of the project. For example "udp1", "tcp1"...</li><li>The <em>target</em> part gives the name of the target device and it's hardware version. For example "65hw201" will indicate that the project creates code for the SBC65EC Hardware version 2.01.</li><li>The <em>bootloader</em> part indicates if the project creates code for use with a bootloader board or not. If it is NOT present the code is created for a board with a bootloader. If it is "nobl", code is created for a board without a bootloader.</li><li>The <em>compiler</em> part indicates what compiler is used, and can be "mc" for the <a class="el" href="tools.html#tools_mplabc18">MPLAB C18 Compiler</a>, or "ht" for the <a class="el" href="tools.html#tools_picc18">Hi Tech PICC18 Compiler</a>.</li></ul>
<p>
Some example project names and their meanings are:<ul>
<li><b>udp1_65hw211_mc.mcp</b> Project file for the "UDP1" project. Uses the <a class="el" href="tools.html#tools_mplabc18">MPLAB C18 Compiler</a>. Creates code for the SBC65EC Hardware V2.11 target board with a bootloader.</li><li><b>tcp2_65hw201_nobl_ht.mcp</b> Project file for the "TCP2" project. Uses the <a class="el" href="tools.html#tools_picc18">Hi Tech PICC18 Compiler</a>. Creates code for the SBC65EC Hardware V2.01 target board without a bootloader.</li></ul>
<p>
Some Modtronix Ethernet enabled boards are delivered programmed with a network bootloader for updating the firmware. Such a board can be identified by a <em><b>BLN Vm.nn</b></em> label on the front of the board - normally stuck on the RTL8019AS 100 pin network chip. Where <em><b>Vm.nn</b></em> is the version number of the bootloader. These boards can be programmed without a PIC programmer.<h2><a class="anchor" name="page_examples_tools">
Program Versions</a></h2>
When using the MPLAB C18 compiler and MPLAB, you have to ensure that the versions of both programs are correct. Click <a href="http://forum.microchip.com/tm.aspx?m=119312" target="_blank">here</a> for details. The MPLAB C18 projects included with this download have been configured for MPLAB C18 V3.02, and MPLAB V7.22 or higher. <b>Only MPLAB C18 V3.02</b> can be used, other versions will not work!<p>
When using the HI-TECH PICC18 compiler, V8.35PL3 or higher should be used. This project was tested with V8.35PL3.<h2><a class="anchor" name="page_examples_target">
Specifying the target board and PIC device</a></h2>
Each MPLAB project will create code for a specific target board. The target board can be specified in one of two places:<ul>
<li>In the "projdefs.h" file (in "src" folder of project)</li><li>In the MPLAB project.</li></ul>
<p>
Most projects included with this download use the MPLAB project file to specify the target board. To modify such a project for another target board, right click on the project in MPLAB, select "Build Options...", and in the "Macro Definitions" edit box modify the "BRD_XXX" define for the required board, for example "BRD_SBC65EC".<p>
If the target board is defined in the "projdefs.h" file, the following line in this file has to be changed to compile the project for a different target board. <div class="fragment"><pre class="fragment"><span class="preprocessor"> #define BRD_XXX </span>
</pre></div><p>
Additionally the PIC microcontroller has to be specified in MPLAB before building the project. This has to be the PIC used on the target board. This is done in the "Configure", "Select Device..." menu in MPLAB. For example, to compile for the SBC68EC, select the PIC18F6680 chip in MPLAB.<p>
The following target boards are currently supported:<ul>
<li><b>SBC65EC, HW V2.01:</b> Use BRD_SBC65EC define, select PIC18F6621 chip in MPLAB</li><li><b>SBC65EC, HW V2.11:</b> Use BRD_SBC65EC define, select PIC18F6627 chip in MPLAB</li><li><b>SBC68EC, HW V2.21:</b> Use BRD_SBC68EC define, select PIC18F6680 chip in MPLAB</li><li><b>SBC44EC:</b> Use BRD_SBC44EC define, select PIC18F452 chip in MPLAB</li><li><b>SBC45EC:</b> Use BRD_SBC45EC define, select PIC18F452 chip in MPLAB</li></ul>
<h2><a class="anchor" name="page_examples_bootloader_compile">
Compiling code for the Bootloader</a></h2>
When compiling code for use with a bootloader, the code starts from address 0x800 in stead of at address 0. The bootloader lives in the code space 0x0 to 0x7ff.<p>
To create a new MPLAB project for a target board with a bootloader, do the following: <ul>
<li>Include (uncomment) the "#define HAS_BOOTLOADER" line in "projdefs.h" </li>
<li>For the <b>HiTech</b> compiler, include the "-A800h" linker command line parameter. When using MPLAB, right click on project and select "Build Options" from the context menu. In the "Build Options" dialog box, select the "PICC-18 Linker" tab. In the "Specify offset for ROM" edit box, enter 800. </li>
<li>For <b>MPLAB</b> <b>C18</b> compiler, ensure the "18f6621_v300.lkr" file is included with the MPLAB project. This file is included in the project tree in MPLAB under "Linker Scripts".</li>
</ul>
<h2><a class="anchor" name="page_examples_bootloader_compile_non">
Compiling code for use without Bootloader</a></h2>
When compiling code for use without a bootloader, the code starts from the normal location (address 0) in stead of from address 0x800.<p>
To create a new MPLAB project for a target board without a bootloader, do the following: <ul>
<li>Remove (comment out) the "#define HAS_BOOTLOADER" line in "projdefs.h" </li>
<li>For the <b>HiTech</b> compiler, ensure the "-A800h" linker command line parameter is NOT present. When using MPLAB, right click on project and select "Build Options" from the context menu. In the "Build Options" dialog box, select the "PICC-18 Linker" tab. In the "Specify offset for ROM" edit box, enter 0. </li>
<li>For <b>MPLAB</b> <b>C18</b> compiler, ensure the "18f6621_v300_nobl.lkr" file is included with the MPLAB project. This file is included in the project tree in MPLAB under "Linker Scripts".</li>
</ul>
<h2><a class="anchor" name="page_examples_firmware_netloader">
Programming a board with a bootloader</a></h2>
Some of the Modtronix Ethernet enabled boards have a Network Bootloader installed on them. The firmware on these boards can be updated without a PIC programmer. For details, click <a class="el" href="page_bootloader.html">here</a>.<h2><a class="anchor" name="page_examples_firmware_programer">
Programming a board without a bootloader</a></h2>
When the project has been compiled for a target board without a bootloader, a PIC programmer has to be used to program the target board. For details, <a href="http://www.modtronix.com/picboards/prog" target="_blank">click here</a>.<h2><a class="anchor" name="page_update_webpages">
Modifying And Updating The Web Pages</a></h2>
Some example projects have web pages that have to be put on the target board, and are used for web based control and monitoring of the target board. The source code for these web pages are always located in the <em>"../src/webpages/"</em> folder of the example source code.<p>
Web files can <b>not</b> be uploaded to the Modtronix TCP/IP Stack individually. All files have to be compiled into a File System Image, and then this image is uploaded to the target. The <a class="el" href="tools.html#tools_mxbootloader">Modtronix Network Bootloader</a> application is used to create this File System Image. After creating it, it can be uploaded to the target via the serial port (Xmodem protocol) or FTP.<h3><a class="anchor" name="page_update_webpages_ftp">
Uploading the File System Image with a FTP client</a></h3>
A FTP client can be used to connect to the target board and upload the File System Image. The default user name is "admin" and the password is "pw". After connecting to the target board, simply upload the entire File System Image file. After doing this, the target will contain the new Web pages.<p>
Total Commander is a great <b>free</b> application that can be used to do all ftp transfers. It can do much more then just ftp. To upload the File System Image with Total Command, do the following:<ul>
<li>Get a free download from <a href="http://www.ghisler.com" target="_blank">www.ghisler.com</a></li><li>Select [net][ftp connect] from menu</li><li>Click on "new connection" button</li><li>Enter any name in the "Session" box</li><li>Enter the target IP address in the "Host name" box, the default value is "10.1.0.1"</li><li>Enter your username and password in the "Username" and "Password" boxes. The default values are "admin" and "pw"</li><li>Connect and download the File System Image (default file is default.img) file containing the HTML pages</li></ul>
<h3><a class="anchor" name="page_update_webpages_xmodem">
Uploading the File System Image via the Xmodem protocol</a></h3>
A Terminal program capable of sending files via the Xmodem protocol can be used to send the File System Image file to the target. For this to work, the target has to be connected to the PC running the Terminal program (HyperTerminal on Windows for example) via its RS232 port. After powering up the target board, enter RS232 configuration mode by following the instructions displayed on the Terminal program. Then select "Download File System Image" from the menu, and send the created "File System Image" file via the Xmodem protocol. In HyperTerminal, this can be done by selecting the "Send File..." menu item in the "Transfer" menu. This will open the "Send File" dialog box. Select Xmodem protocol, and send the "File System Image" file created with the Modtronix Network Bootloader program. After doing this, the target will contain the new Web pages. <hr size="1"><address style="align: right;"><small>Generated on Wed Apr 12 11:29:56 2006 for Example Projects by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
