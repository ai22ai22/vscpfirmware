<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SBC68EC Web Server: ex_file_image.c</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul></div>
<h1>ex_file_image.c</h1>This example code will update the File System Image. When the FSEE (external EEPROM) File System is used for example, this means that this is basically a write to the EEPROM chip. All data will be overwritten!<p>
If the write process has to be interrupted for some reason (it takes too long) before the fsysCloseImage() function is called, then the fileRelease(0) function has to be called. When returning to the function (and completing the writing of the File System), we will continue with the fsysPutByteImage(c) function calls until the whole File System Image has been written.<p>
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 included <span class="stringliteral">"fsee.h"</span>
<a name="l00002"></a>00002 
<a name="l00016"></a>00016 <span class="keywordtype">void</span> <a name="a0"></a><a class="code" href="ex__file__image_8c.html#ab92cb37dc17b4df87aa46033d38c9ba">writeImage</a>(<span class="keywordtype">void</span>) {
<a name="l00017"></a>00017     <a name="a1"></a><a class="code" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> c;
<a name="l00018"></a>00018 
<a name="l00019"></a>00019     <span class="comment">//Prepare the File System to receive a new Image - all data is overwritten! It is</span>
<a name="l00020"></a>00020     <span class="comment">//assigned handle 0</span>
<a name="l00021"></a>00021     fsysOpenImage();
<a name="l00022"></a>00022 
<a name="l00023"></a>00023     <span class="keywordflow">while</span> (1) {
<a name="l00024"></a>00024         <span class="comment">//Get next byte of File System Image</span>
<a name="l00025"></a>00025         c = ....
<a name="l00026"></a>00026         
<a name="l00027"></a>00027         <span class="comment">//Write a byte to the File System Image file</span>
<a name="l00028"></a>00028         fsysPutByteImage(c);
<a name="l00029"></a>00029         
<a name="l00030"></a>00030         <span class="comment">//If finished writing File System Image, break</span>
<a name="l00031"></a>00031         <span class="keywordflow">if</span> (...)
<a name="l00032"></a>00032             <span class="keywordflow">break</span>;
<a name="l00033"></a>00033     }
<a name="l00034"></a>00034     
<a name="l00035"></a>00035     <span class="comment">//Finished writing new File System Image</span>
<a name="l00036"></a>00036     fsysCloseImage();
<a name="l00037"></a>00037 }
</pre></div> <hr size="1"><address style="align: right;"><small>Generated on Mon Oct 9 11:35:13 2006 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
