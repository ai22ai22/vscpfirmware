<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SBC68EC Web Server: CGI</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul></div>
<h1>CGI<br>
<small>
[<a class="el" href="group__mod__tcpip__httpsrvr.html">HTTP Server</a>]</small>
</h1><h2><a class="anchor" name="Introduction">
Introduction</a></h2>
CGI commands are accepted by the Web Server via the HTTP GET command. All CGI commands follow the HTTP GET syntax of <em>name=value</em>. For example, to set PIC port pin A2, we can send the following HTTP command to the target board:<br>
 <a href="http://10.1.0.1/?a2=1">http://10.1.0.1/?a2=1</a> <br>
In this example the <em>name</em> part is "a2" and the <em>value</em> part is '1'.<h2><a class="anchor" name="mod_tcpip_httpsrvr_cgi_getcmd">
GET Command</a></h2>
A remote client invokes a function by the HTML GET method with more than one parameter. Refer to RFC1866 (the HTML 2.0 language specification) for more information. When a remote browser executes a GET method with more than one parameter, the HTTP server parses it and calls the main application with the actual method code and its parameter. In order to handle this method, the main application must implement a callback function with an appropriate code. The Modtronix HTTP Server does not perform "URL decoding". This means that if any of the form field text contains certain special non-alphanumeric characters (such as &lt;, &gt;, #, %, etc.), the actual parameter value would contain "%xx" ("xx" being the two-digit hexadecimal value of the ASCII character) instead of the actual character. For example, an entry of "&lt;Name&gt;" would return "%3CName%3C".<p>
The <a class="el" href="http_8h.html#e7308dd0acc72aa6195e6cdd78bd5af3">HTTPExecGetCmd()</a> function is a callback function from the HTTP Server. When the HTTP Server receives a GET method with more than one parameter, it calls this function. This function has been implemented by the Modtronix SBC68EC Web Server in the "httpexec.c" file! All commands implemented by the Modtronix SBC68EC Web Server are listed below.<p>
This function must repetively call the <a class="el" href="http_8h.html#a5fd250a77a5b2909f67ab54b3bad1b7">HTTPGetParam()</a> function until all name-value parameters sent with the GET command have been obtained. It must then decode the name-value parameter and take appropriate actions. Such actions may include supplying a new Web page name to be returned and/or performing an I/O task.<h2><a class="anchor" name="mod_tcpip_httpsrvr_cgi_cmd">
Defined Commands</a></h2>
The following list of commands are implemented by the Modtronix SBC68EC Web Server in the "httpexec.c" file. This file can be modified by the user to add aditional commands:<br>
<ul>
<li>Command group <b>a</b> to <b>j</b> - <a class="el" href="group__mod__tcpip__httpsrvr__cgi.html#mod_tcpip_httpsrvr_cgi_cmd_ios">PIC Port Commands</a></li><li>Command group <b>k</b> - <a class="el" href="group__mod__tcpip__httpsrvr__cgi.html#mod_tcpip_httpsrvr_cgi_cmd_config">Config Commands</a></li><li>Command group <b>l</b> - <a class="el" href="group__mod__tcpip__httpsrvr__cgi.html#mod_tcpip_httpsrvr_cgi_cmd_general">General Commands</a></li><li>Command group <b>m</b> - <a class="el" href="group__mod__tcpip__httpsrvr__cgi.html#mod_tcpip_httpsrvr_cgi_cmd_short">Short Commands</a></li></ul>
<p>
<hr>
 <h3><a class="anchor" name="mod_tcpip_httpsrvr_cgi_cmd_ios">
PIC Port Commands</a></h3>
A PIC Port command has the following syntax: <code>"pxx=v"</code><ul>
<li>The 'p' part is the <em>Command Group</em>, and represents the PIC port. It has a value from <b>a</b> to <b>g</b>.</li><li>The 'xx' part is the <em>Command code</em>, and specifies the command to execute on the given port.</li><li>The 'v' part is the command operand, and is command specific. It usually is '1' or '0'.</li></ul>
<p>
The following PIC port commands are implemented by the Modtronix SBC68EC Web Server:  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%"><td nowrap align=center><i>Command Syntax</i></td><td align=center><i>Description</i></td></tr>
<tr><td><code>p=YY</code></td><td><b>Port Command</b> - set the given PIC port to the given hex value. The given hex value must be
in uppercase! For example:
    <br>"<code>a=8A</code>" will set PIC port A to 0x8A.
</td></tr>
<tr><td><code>p[0-7]=[1,0]</code></td><td><b>Port Pin Command</b> - set or clear the given PIC port pin. For example:
    <br>"<code>a0=0</code>" will clear PIC port A0 (Port A, pin 0)
    <br>"<code>f7=1</code>" will set PIC port F7 (Port F, pin 7)
</td></tr>
<tr><td><code>p[0-7]r=[1,0]</code></td><td><b>Port Pin Command, Remember</b> -  - Same as "Port Pin Command" command, except that
    the settings are saved to the application configuration, and is remembered after power up.
</td></tr>
<tr><td><code>pc[0-7]=[1,0]</code></td><td><b>Port Pin Configuration</b> - Configure given PIC port pin as input or output. '0' will configure
    pin to be an output, and '1' an input. The port direction configured with this command will NOT be remembered
    after the next power up, use the "Port Pin Configuration, Remember" command to achieve this!  Example to use this command:
    <br>"<code>ac0=0</code>" will configure PIC port A0 (Port A, pin 0) to be an output.
    <br>"<code>fc7=1</code>" will configure PIC port F7 (Port F, pin 7) to be an input
</td></tr>
<tr><td><code>pc[0-7]r=[1,0]</code></td><td><b>Port Pin Configuration, Remember</b> - Same as "Port Pin Configuration" command, except that
    the settings are saved to the application configuration, and is remembered after power up.
</td></tr>
<tr><td><code>px[0-7]=[1,0]</code></td><td><b>Inverted Port Pin Command</b> - Set or clear the given PIC port pin. The value is inverted! For example:
    <br>"<code>ax0=0</code>" will set PIC port A0 (Port A, pin 0)
    <br>"<code>fx7=1</code>" will clear PIC port F7 (Port F, pin 7)
</td></tr>
</table>
<p>
Examples:<br>
  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%"><td align=center nowrap ><i>Example GET command</i></td><td align=center><i>Description</i></td></tr>
<tr><td><code>f=01</code></td><td>This example will set PIC port F to 0x01</td></tr>
<tr><td><code>c5=1</code></td><td>This example will set PIC port C5</td></tr>
<tr><td><code>bx0=1</code></td><td>This example will clear PIC port B0</td></tr>
</table>
 An example of sending a GET command to a target board with an IP address of "10.1.0.1" is:<br>
 <a href="http://10.1.0.1/?f=01">http://10.1.0.1/?f=01</a> <br>
This command can be sent by entering the line above in a standard web browser, or could be send by custom software.<p>
<hr>
 <h3><a class="anchor" name="mod_tcpip_httpsrvr_cgi_cmd_config">
Config Commands</a></h3>
The Config Command is used to modifying the <a class="el" href="appcfg_8h.html#307c9d3a0867a5744bfa7a702d07b981">Application Configuration bytes</a>. To see what can be configured with this command, please have a look at the list of <a class="el" href="appcfg_8h.html#307c9d3a0867a5744bfa7a702d07b981">Application Configuration bytes</a>.<p>
The Config command has the following syntax: <code>"kxx=v"</code><ul>
<li>The 'k' part is the <em>Command Group</em>, and indicates this is a <em>Config Command</em>.</li><li>The 'xx' part is the <em>Command Code</em>, and specifies the offset (in hex) of the <a class="el" href="appcfg_8h.html#307c9d3a0867a5744bfa7a702d07b981">Application Configuration bytes</a>.</li><li>The 'v' part is the new value (in decimal) that has to be assigned to the given configuration byte. It is a decimal value.</li></ul>
<p>
All Config commands can <b>only</b> be executed by a logged in user!<p>
Examples:<br>
  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%"><td align=center nowrap ><i>Example GET command</i></td><td align=center><i>Description</i></td></tr>
<tr><td><code>k00=100</code></td><td>This example will set the the "Application Configuration byte" at 0x00 (MSB of IP address) to 100</td></tr>
<tr><td><code>k2A=16</code></td><td>This example will set the "Application Configuration byte" at 0x2A (Port F direction) to 16 (0x0f).
Address 0x2A contains the TRIS register for PIC Port F. Setting a bit to 0 will configure the port as
an output, and 1 as an input. In this example we set TRISF to 0x0f = binary 00001111. This will configure port F
pins 0-3 as inputs, and pins 4-7 as outputs.</td></tr>
<tr><td><code>k2F=16</code></td><td>This example will set the "Application Configuration byte" at 0x2F (Port F default value) to 10 (0x0a).
Address 0x2F contains the default value for PIC Port F at power up. In this example we set it to 0x0a = binary 00001010. This will
set the default value of port F pins 1 and 3 to 1 (5V), and pins 0, 2, 4, 5, 6, 7 to 0 (0V) at power up.</td></tr>
</table>
 An example of sending a GET command to a target board with an IP address of "10.1.0.1" is:<br>
 <a href="http://10.1.0.1/?k1A=22">http://10.1.0.1/?k1A=22</a> <br>
This command can be sent by entering the line above in a standard web browser, or could be send by custom software.<p>
<hr>
 <h3><a class="anchor" name="mod_tcpip_httpsrvr_cgi_cmd_general">
General Commands</a></h3>
The General command has the following syntax: <code>"lx=v"</code><ul>
<li>The 'l' part is the <em>Command Group</em>, and indicates this is a <em>General Command</em>.</li><li>The 'x' part is the <em>Command Code</em>, and specifies the command that is to be executed.</li><li>The 'v' part is the command operand, and is command specific.</li></ul>
<p>
The following General commands are implemented by the Modtronix SBC68EC Web Server. If the <em>Logged In</em> column contains a 'X' character then this command can only be executed by a logged in user!  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%">
    <td nowrap align=center><i>Command Syntax</i></td>
    <td align=center><i>Logged<br>In</i></td>
    <td align=center><i>Description</i></td>
</tr>
<tr><td><code>la=str</code></td><td align=center>X</td>
    <td><b>New Username</b> - assigns a new Username. The given "str" is the new username, and must be an alpha numeric
        string of 1 to 8 characters. For example:
        <br>"<code>la=wombat</code>" will set the new username to "wombat".</td>
</tr>
<tr><td><code>lb=str</code></td><td align=center>X</td>
    <td><b>New Password</b> - assigns a new Password. The given "str" is the new password, and must be an alpha numeric
        string of 1 to 8 characters. For example:
        <br>"<code>lb=gumtree</code>" will set the new username to "gumtree".</td>
</tr>
<tr><td><code>ln=str</code></td><td align=center>X</td>
    <td><b>New NetBIOS name</b> - assigns a new NetBIOS name. The given "str" is the new name, and must be an alpha numeric
        string of 1 to 15 characters. For example:
        <br>"<code>lb=CROC1</code>" will set the new username to "CROC1".</td>
</tr>
<tr><td><code>lu=str</code></td><td align=center>&nbsp;</td>
    <td><b>Username</b> - gives the username of an user attempting to log in. The given "str" is the username, and must be an alpha numeric
        string of 1 to 8 characters. This command must be followed by the Password command. For example:
        <br>"<code>lu=admin</code>" will send a request to log in for the "admin" user.</td>
</tr>
<tr><td><code>lp=str</code></td><td align=center>&nbsp;</td>
    <td><b>Password</b> - gives the password of an user attempting to log in. The given "str" is the password, and must be an alpha numeric
        string of 1 to 8 characters. This command must followed the Username command. For example:
        <br>"<code>lp=pw</code>" will send a request to log with the "pw" password.</td>
</tr>
</table>
<p>
Examples:<br>
 The following example will log in an user with username="admin" and password="pw" to a target with an IP address of "10.1.0.1":<br>
 <a href="http://10.1.0.1/?lu=admin&lp=pw">http://10.1.0.1/?lu=admin&amp;lp=pw</a> <br>
This command can be sent by entering the line above in a standard web browser, or could be send by custom software.<p>
<hr>
 <h3><a class="anchor" name="mod_tcpip_httpsrvr_cgi_cmd_short">
Short Commands</a></h3>
Short commands do not have any command operands. They always have the following syntax: <code>"m=v"</code><ul>
<li>The 'm' part is the <em>Command Group</em>, and indicates this is a <em>Short Command</em>.</li><li>The 'v' part is the <em>Command Code</em>, and specifies the command that is to be executed.</li></ul>
<p>
The following Short commands are implemented by the Modtronix SBC68EC Web Server. If the <em>Logged In</em> column contains a 'X' character then this command can only be executed by a logged in user!  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%">
    <td nowrap align=center><i>Command Syntax</i></td>
    <td align=center><i>Logged<br>In</i></td>
    <td align=center><i>Description</i></td>
</tr>
<tr><td><code>m=r</code></td><td align=center>X</td>
    <td><b>Reset Board</b> - reset's the board. This command can be used to remotely reset the board. This can
    be used to update the firmware via the network bootloader for example.</td>
</tr>
<tr><td><code>m=o</code></td><td align=center>X</td>
    <td><b>Log Out</b> - log out the current user.</td>
</tr>
</table>
<p>
Examples:<br>
 The following example will reset a target with an IP address of "10.1.0.1":<br>
 <a href="http://10.1.0.1/?m=r">http://10.1.0.1/?m=r</a> <br>
This command can be sent by entering the line above in a standard web browser, or could be send by custom software. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Oct 9 11:35:15 2006 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
