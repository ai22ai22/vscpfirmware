<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SBC68EC Web Server: Dynamic Web Pages</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul></div>
<h1>Dynamic Web Pages<br>
<small>
[<a class="el" href="group__mod__tcpip__httpsrvr.html">HTTP Server</a>]</small>
</h1><h2><a class="anchor" name="Introduction">
Introduction</a></h2>
The HTTP Server can dynamically alter pages and substitute real-time information, such as input/output status. The web server will parse CGI files for special tags, and replace them with user defined string. Only "*.cgi" files are parsed for these special tags. <p>
To incorporate this real-time information, the corresponding CGI file (*.cgi) must contain a text string with the format: "%nxx". Where the '%' character serves as a control code, 'n' represents the variable group and "xx" represents a two-digit variable value ( in uper case hex format). <br>
The <em>variable value</em> has a range of 00-FF (Which translates to 0-255 decimal), and must use <b>upper case</b> characters! <br>
The <em>variable group</em> ('n' character) can be any alpha numeric character ('0-9', 'a-z', 'A-Z'), giving a total of 10+26+26 = 62 groups. Each group can have 256 variable values. This gives a total of 15872 possible variables. <p>
When the HTTP Server encounters this text string, it removes the '%' character and calls the <a class="el" href="http_8h.html#015c5b9453668f6d32ada2d7bb20663f">HTTPGetVar()</a> function. This function has been implemented by the Modtronix SBC68EC Web Server in the "httpexec.c" file! All tags implemented by the Modtronix SBC68EC Web Server are listed below.<p>
The <a class="el" href="http_8h.html#015c5b9453668f6d32ada2d7bb20663f">HTTPGetVar()</a> function will define strings that will replace tags found in the "*.cgi" file. If the page requires '%' as a display character, it should be preceded by another '%' character. For example, to display "23%" in a page, put "23%%".<h2><a class="anchor" name="mod_tcpip_httpsrvr_dynamic_tags">
Defined Tags</a></h2>
The following list of tags are implemented by the Modtronix SBC68EC Web Server in the "httpexec.c" file. This file can be modified by the user to add aditional tags:<br>
<ul>
<li>Variable group <b>n</b> - <a class="el" href="group__mod__tcpip__httpsrvr__dynamic.html#mod_tcpip_httpsrvr_dynamic_tags_analog">Analog Inputs</a></li><li>Variable group <b>k</b> - <a class="el" href="group__mod__tcpip__httpsrvr__dynamic.html#mod_tcpip_httpsrvr_dynamic_tags_config">Configuration Values</a></li><li>Variable group <b>l</b> - <a class="el" href="group__mod__tcpip__httpsrvr__dynamic.html#mod_tcpip_httpsrvr_dynamic_tags_general">General</a></li><li>Variable group <b>a</b> to <b>j</b> - <a class="el" href="group__mod__tcpip__httpsrvr__dynamic.html#mod_tcpip_httpsrvr_dynamic_tags_ios">PIC Ports</a></li></ul>
<p>
<hr>
 <h3><a class="anchor" name="mod_tcpip_httpsrvr_dynamic_tags_ios">
PIC Ports</a></h3>
The variable groups <b>a</b> to <b>j</b> can be used to display the value of any input pin or port on the PIC. The lower 3 bits of the 8 bit variable value is used to specify the desired bit of the given port (port is given by variable group). The upper 5 bits are used to specify how the ports value should be displayed. The following variable groups are defined:  
<table class=compactTable cellpadding=2 cellspacing=0 border=1>
<tr width="100%"><td align="center"><i>Variable Group</i></td><td align="center"><i>Description</i></td></tr>
<tr><td>a</td><td>PIC Port A </td></tr>
<tr><td>b</td><td>PIC Port B </td></tr>
<tr><td>c</td><td>PIC Port C </td></tr>
<tr><td>d</td><td>PIC Port D </td></tr>
<tr><td>e</td><td>PIC Port E </td></tr>
<tr><td>f</td><td>PIC Port F </td></tr>
<tr><td>g</td><td>PIC Port G </td></tr>
<tr><td>h</td><td>Reserved for furture use </td></tr>
<tr><td>j</td><td>Reserved for furture use </td></tr>
</table>
<p>
The following variable values(in hex) are defined:  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%"><td align=center><i>Variable Value</i></td><td align=center><i>String returned by HTTP Server - displayed on web page</i></td></tr>
<tr><td><code>00 - 07</code></td><td>'1' or '0' returned depending on PORT state</td></tr>
<tr><td><code>10 - 17</code></td><td>"on" or "off" returned depending on PORT state</td></tr>
<tr><td><code>20 - 27</code></td><td>"&lt;!--" returned if port is configured as input</td></tr>
<tr><td><code>28 - 2f</code></td><td>"--&gt;" returned if port is configured as input</td></tr>
<tr><td><code>30 - 37</code></td><td>"&lt;!--" returned if port is configured as output</td></tr>
<tr><td><code>38 - 3f</code></td><td>"--&gt;" returned if port is configured as output</td></tr>
<tr><td><code>40 - 47</code></td><td>"checked" returned if port is configured as output</td></tr>
<tr><td><code>48 - 4f</code></td><td>"checked" returned if port is configured as input</td></tr>
<tr><td><code>50 - 57</code></td><td>"0" returned if port is configured as output. "1" returned if port is configured as input.</td></tr>
</table>
For variable values where bit 3 is set (values from x8 to xf):
<br>x8=port bit 0, x9=port bit 1, xa=port bit 2, xb=port bit 3
<br>xc=port bit 4, xd=port bit 5, xe=port bit 6, xf=port bit 8
<br>For example, variable value 48 will return "checked" if port <b>bit 0</b> is configured as an input
<p>
Examples:  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%"><td align=center nowrap ><i>Example Tag</i></td><td align=center><i>Description</i></td></tr>

<tr><td><code>%a02</code></td><td>Variable group = a, Variable value = 0x02. This example
will display the value of port A2 as '1' or '0'. So, if port A2 is set, a '1' will be displayed
on the web page in stead of '%a02'</td></tr>

<tr><td><code>%c17</code></td><td>Variable group = c, Variable value = 0x17. This example
will display the value of port C7 as 'on' or 'off'. So, if port C7 is clear for example, 'off' will be
displayed on the web page in stead of '%c17'</td></tr>

<tr><td><code>%f22</code></td><td>Variable group = f, Variable value = 0x22. Variable values
20 to 2F can be used to place HTML comments around HTML code if a port is configured as an input. For example,
to only display an image if a Port pin RF1 is configured as an output, you could write:<br>
<i>%f21&lt;img src="picture.jpg"&gt;%f29</i></td></tr>

<tr><td><code>%g52</code></td><td>Variable group = g, Variable value = 0x52. This example
will display '1' if port G2 is configured as an input, and '0' if port G2 is configured as an output.</td></tr>

<tr><td><code>%b45</code></td><td>Variable group = b, Variable value = 0x45. This example
will display 'checked' if port B5 is configured as an output.</td></tr>

<tr><td><code>%c4c</code></td><td>Variable group = c, Variable value = 0x4c. This example
will display 'checked' if port C5 is configured as an intput.</td></tr>
</table>
<p>
<hr>
 <h3><a class="anchor" name="mod_tcpip_httpsrvr_dynamic_tags_analog">
Analog Inputs</a></h3>
The variable group <b>n</b> can be used to display the value of any Analog Input on the PIC.<p>
The following variable values(in hex) are defined:  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%"><td align=center><i>Variable Value</i></td><td align=center><i>String returned by HTTP Server - displayed on web page</i></td></tr>
<tr><td><code>00 - 0A</code></td><td>2 or 3 digit hex value in capital letters</td></tr>
<tr><td><code>10 - 1A</code></td><td>Decimal value 0 - 255 or 0 - 1023</td></tr>
<tr><td><code>20 - 2A</code></td><td>Decimale value, 2 decimal places for 5V reference</td></tr>
<tr><td><code>30 - 3A</code></td><td>"&lt;!--" returned if the channels is configured for ADC</td></tr>
<tr><td><code>40 - 4A</code></td><td>"--&gt;" returned if the channels is configured for ADC</td></tr>
<tr><td><code>50 - 5A</code></td><td>"&lt;!--" returned if the channels is NOT configured for ADC</td></tr>
<tr><td><code>60 - 6A</code></td><td>"--&gt;" returned if the channels is NOT configured for ADC</td></tr>
</table>
<p>
Examples:  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%"><td align=center nowrap ><i>Example Tag</i></td><td align=center><i>Description</i></td></tr>

<tr><td><code>%n02</code></td><td>Variable group = n, Variable value = 0x02. This example
will display the value of Analog Input 2 in uppercase hex. For example, "A8" will be displayed
on the web page in stead of '%n02' if Analog Input 2 has the value 0xA8.</td></tr>

<tr><td><code>%n1A</code></td><td>Variable group = n, Variable value = 0xaA. This example
will display the value of Analog input 10 in decimal. For example, "210" will be displayed
on the web page in stead of '%n1A' if Analog Input 10 has the value 210.</td></tr>

<tr><td><code>%n32</code></td><td>Variable group = n, Variable value = 0x32. Variable values
30-3A and 40-4A can be used to place HTML comments around HTML code if a PIC port pin is configured as an Analog Input.
For example, to only display an image if a Analog Input 2 is configured as an Analog Input, you could write:<br>
<i>%n32&lt;img src="picture.jpg"&gt;%n42</i></td></tr>
</table>
<p>
<hr>
 <h3><a class="anchor" name="mod_tcpip_httpsrvr_dynamic_tags_general">
General</a></h3>
The variable group <b>l</b> is used for displaying general information.<p>
The following variable values(in hex) are defined. If the <em>Logged In</em> column contains a 'X' character then this tag will only be parsed if the current user is logged in!  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%">
    <td align=center><i>Variable Value</i></td>
    <td align=center><i>Logged In</i></td>
    <td align=center><i>String returned by HTTP Server - displayed on web page</i></td>
</tr>
<tr><td><code>00</code></td><td align=center>&nbsp;</td>
    <td>Displays the <b>Username</b> of the current user. For example "Guest" or "Admin". The current user
    will be "Guest" if the user has not logged in.</td></tr>
<tr><td><code>01</code></td></td><td align=center>&nbsp;</td>
    <td>Displays the <b>TCP/IP stack version</b>. For example "V2.04". </td></tr>
<tr><td><code>02</code></td></td><td align=center>&nbsp;</td>
    <td>Displays the <b>Application version</b>. For example "V3.00".</td></tr>
<tr><td><code>03</code></td></td><td align=center>&nbsp;</td>
    <td>Returns '0' if we are currently not <b>logged in</b>, or '1' if we are.</td></tr>
<tr><td><code>04</code></td></td><td align=center>&nbsp;</td>
    <td>Displays 'Yes' if the board has a <b>bootloader</b>, else 'No'</td></tr>
<tr><td><code>05</code></td></td><td align=center>&nbsp;</td>
    <td>Displays our <b>NetBIOS</b> name</td></tr>
<tr><td><code>10</code></td></td><td align=center>&nbsp;</td>
    <td>Displays first part of current <b>IP address</b>. For example, will be '5' if our IP is '10.1.0.5'.</td></tr>
<tr><td><code>11</code></td></td><td align=center>&nbsp;</td>
    <td>Displays second part of current <b>IP address</b>.</td></tr>
<tr><td><code>12</code></td></td><td align=center>&nbsp;</td>
    <td>Displays third part of current <b>IP address</b>.</td></tr>
<tr><td><code>13</code></td></td><td align=center>&nbsp;</td>
    <td>Displays fourth part of current <b>IP address</b>. For example, will be '10' if our IP is '10.1.0.5'.</td></tr>
<tr><td><code>14</code></td></td><td align=center>&nbsp;</td>
    <td>Displays first part of <b>MAC address</b>. For example, will be '5' if our MAC is '0.1.2.3.4.5'.</td></tr>
<tr><td><code>15</code></td></td><td align=center>&nbsp;</td>
    <td>Displays second part of <b>MAC address</b>.</td></tr>
<tr><td><code>16</code></td></td><td align=center>&nbsp;</td>
    <td>Displays third part of <b>MAC address</b>.</td></tr>
<tr><td><code>17</code></td></td><td align=center>&nbsp;</td>
    <td>Displays fourth part of <b>MAC address</b>.</td></tr>
<tr><td><code>18</code></td></td><td align=center>&nbsp;</td>
    <td>Displays fifth part of <b>MAC address</b>.</td></tr>
<tr><td><code>19</code></td></td><td align=center>&nbsp;</td>
    <td>Displays sixth part of <b>MAC address</b>. For example, will be '200' if our MAC is '200.1.2.3.4.5'.</td></tr>
<tr><td><code>1A</code></td></td><td align=center>&nbsp;</td>
    <td>Displays first part of current Network <b>MASK</b>. For example, will be '255' if our mask is '0.0.0.255'.</td></tr>
<tr><td><code>1B</code></td></td><td align=center>&nbsp;</td>
    <td>Displays second part of current Network <b>MASK</b>.</td></tr>
<tr><td><code>1C</code></td></td><td align=center>&nbsp;</td>
    <td>Displays third part of current Network <b>MASK</b>.</td></tr>
<tr><td><code>1D</code></td></td><td align=center>&nbsp;</td>
    <td>Displays fourth part of current Network <b>MASK</b>. For example, will be '15' if our mask is '15.0.0.255'.</td></tr>
<tr><td><code>1E</code></td></td><td align=center>&nbsp;</td>
    <td>Displays first part of current <b>Gateway address</b>. For example, will be '5' if our Gateway Address is '10.1.0.5'.</td></tr>
<tr><td><code>1F</code></td></td><td align=center>&nbsp;</td>
    <td>Displays second part of current <b>Gateway address</b>.</td></tr>
<tr><td><code>20</code></td></td><td align=center>&nbsp;</td>
    <td>Displays third part of current <b>Gateway address</b>.</td></tr>
<tr><td><code>21</code></td></td><td align=center>&nbsp;</td>
    <td>Displays fourth part of current <b>Gateway address</b>. For example, will be '10' for '10.1.0.5'.</td></tr>
</table>
<p>
Examples:  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%"><td align=center nowrap ><i>Example Tag</i></td><td align=center><i>Description</i></td></tr>
<tr><td><code>%l00</code></td><td>Variable group = l, Variable value = 00. This example
will display the name of the user currently logged in. If the username of the user currently logged in
is "Admin", then "Admin" will be displayed on the web page in stead of '%l00'</td></tr>
<tr><td><code>%l10.%l11.%l12.%l13</code></td><td>Variable group = l, Variable value = 10 to 13. This example
will display our IP address.</td></tr>
</table>
<p>
<hr>
 <h3><a class="anchor" name="mod_tcpip_httpsrvr_dynamic_tags_config">
Configuration Values</a></h3>
The variable group <b>k</b> is used for displaying the contents of the <a class="el" href="appcfg_8h.html#307c9d3a0867a5744bfa7a702d07b981">Application Configuration bytes</a>. The values are displayed in decimal! The variable value (in uppercase hex) is used to specify the offset of the configuration byte to display. All of these tags are only parsed if the current user is logged in!<p>
Examples:  
<table class=compactTable cellspacing=0 cellpadding=2 border=1>
<tr width="100%"><td align=center nowrap ><i>Example Tag</i></td><td align=center><i>Description</i></td></tr>

<tr><td><code>%k00.%k01.%k02.%k03</code></td><td>This example will display the currently configured IP
address. If the IP address is "10.1.0.1", then "10.1.0.1" will be displayed on the web page in stead
of "%k00.%k01.%k02.%k03".</td></tr>

<tr><td><code>%k0A.%k0B.%k0C.%k0D</code></td><td>This example will display the currently configured
network MASK. If the MASK is "255.0.0.0", then "255.0.0.0" will be displayed on the web page in stead
of "%k0A.%k0B.%k0C.%k0D".</td></tr>
</table>
 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Oct 9 11:35:15 2006 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
