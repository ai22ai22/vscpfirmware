<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SBC68EC Web Server: Building The Project</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul></div>
<h1><a class="anchor" name="page_build_project">Building The Project</a></h1><h2><a class="anchor" name="page_build_project_introduction">
Introduction</a></h2>
The Modtronix SBC68EC Web Server can be built to be used with any revision of the SBC68EC. All new (since hardware V2.01) boards are delivered programmed with a network bootloader for updating firmware. Such a board can be identified by a <em><b>BLN Vm.nn</b></em> label on the front of the board - normally stuck on the RTL8019AS 100 pin network chip. Where <em><b>Vm.nn</b></em> is the version number of the bootloader. The bootloader is contained in the bottom 2K bootblock of the PIC microcontroller.<p>
For older versions of the SBC68EC without a bootloader, a PIC programmer is required to program the board. For details on programming the target board, see <a class="el" href="page_update_firmware.html">Updating The Firmware</a>.<p>
For pre build binary versions of the latest firmware, see <a href="http://www.modtronix.com/products/sbc68ec/firmware" target="_blank">firmware for the SBC68EC</a>.<h2><a class="anchor" name="page_build_project_tools">
Program Versions</a></h2>
When using the <a class="el" href="tools.html#tools_mplabc18">MPLAB C18 Compiler</a> and <a class="el" href="tools.html#tools_mplab">MPLAB IDE</a>, you have to ensure that the versions of both programs are correct. Click <a href="http://forum.microchip.com/tm.aspx?m=119312" target="_blank">here</a> for details. The MPLAB C18 projects included with this download have been configured for <a class="el" href="tools.html#tools_mplabc18">MPLAB C18 Compiler</a> V3.02, and <a class="el" href="tools.html#tools_mplab">MPLAB IDE</a> V7.22 or higher. <b>Only <a class="el" href="tools.html#tools_mplabc18">MPLAB C18 Compiler</a> V3.02</b> can be used, other versions will not work!<p>
All MPLAB projects included with this source code download have been configured for when the MPLAB C18 C compiler has been installed on the c drive in a folder named "mcc18vmnn". Where "mnn" is the version number of the compiler. For example, V3.02 of the C18 compiler has to be installed in the "c:\mcc18v302" folder. If this is not the case, the user will have to:<ul>
<li>Modify the paths in the MPLAB project. Right click on the MPLAB project in the "Project" window in MPLAB, select "Build Options" from the context menu, and update the paths.</li><li>Modify the Language tool locations in MPLAB. Select "Set Language Tool Locations" from the "Project" menu in MPLAB. Update the paths for the MPLAB C18 compiler.</li></ul>
<p>
When using the HI-TECH PICC18 compiler, V8.35PL3 or higher should be used. This project was tested with V8.35PL3.<h2><a class="anchor" name="page_bootloader_compile">
Compiling projects for use with a Bootloader board</a></h2>
The "websrvr_ht_hwxyy.mcp" and "websrvr_mc_hwxyy.mcp" <a class="el" href="tools.html#tools_mplab">MPLAB IDE</a> project files can be used for compiling the project for use with a Bootloader. The "websrvr_ht_hwxyy.mcp" projects use the Hi Tech compiler, and the "websrvr_mc_hwxyy.mcp" projects use the <a class="el" href="tools.html#tools_mplabc18">MPLAB C18 Compiler</a>.<p>
The trailing "_hwxyy" part of the file name indicates for what hardware version board the project is meant (see below for details on identifying the version number of a board). For example, the "websrvr_ht_hw211.mcp" file will be for a hardware V2.11 board with a bootloader.<p>
Both these projects are configured to be used with a SBC68EC Board with a bootloader. This basically means that in stead of starting from address 0, the code starts from address 0x800. The bootloader lives in the code space 0x0 to 0x7ff. The MPLAB projects included in the source code download have already been configured to be used with the bootloader - nothing has to be done. Just build the project, and the generated hex file can be loaded onto the SBC68EC via the <a class="el" href="tools.html#tools_mxbootloader">Modtronix Network Bootloader</a> application.<h2><a class="anchor" name="page_bootloader_compile_non">
Compiling projects for use with a board without a Bootloader</a></h2>
The "websrvr_nobl_ht_hwxyy.mcp" and "websrvr_nobl_mc_hwxyy.mcp" <a class="el" href="tools.html#tools_mplab">MPLAB IDE</a> project files can be used for compiling a the project for use without a Bootloader. The "websrvr_nobl_ht_hwxyy.mcp" project uses the Hi Tech compiler, and the "websrvr_nobl_mc_hwxyy.mcp" project uses the <a class="el" href="tools.html#tools_mplabc18">MPLAB C18 Compiler</a>.<p>
The trailing "_hxyy" part of the file name indicates for what hardware version board the project is meant (see below for details on identifying the version number of a board). For example, the "websrvr_nobl_ht_hw201.mcp" file will be for a hardware V2.01 board without a bootloader.<p>
Both these project are configured to be used with a SBC68EC board without a bootloader. This basically means that in stead of starting from address 0x800, the code starts from the normal location, address 0.<h2><a class="anchor" name="page_build_project_included">
Compiled projects included in download</a></h2>
Compiled (binary) versions of the firmware for all revisions of the SBC68EC are contained in the "../src" folder of the downloaded <a href="http://www.modtronix.com/products/sbc68ec#apps" target="_blank">source code</a>. The hex file name indicates which C Compiler was used to build it, if it is meant for a board with a bootloader, and for what hardware version board it is.<p>
The trailing "_hwxyy" part of the file name indicates for what hardware version board the file is meant (see below for details on identifying the version number of a board). For example, the "websrvr_ht_hw211.hex" file will be for a hardware V2.11 board.<p>
The following hex files are included for all SBC68EC board versions:<ul>
<li><em>websrvr_ht_hwxyy.hex</em> - Hex file for use with bootloader, compiled with the HiTech compiler. Is created by opening and building the corresponding <em>"websrvr_ht_hwxyy.mcp"</em> MPLAB project file.</li><li><em>websrvr_mc_hwxyy.hex</em> - Hex file for use with bootloader, compiled with the MPLAB C18 compiler. Is created by opening and building the corresponding <em>"websrvr_mc_hwxyy.mcp"</em> MPLAB project file.</li><li><em>websrvr_nobl_ht_hwxyy.hex</em> - Hex file for use with bootloader, compiled with the HiTech compiler. Is created by opening and building the corresponding <em>"websrvr_nobl_ht_hwxyy.mcp"</em> MPLAB project file.</li><li><em>websrvr_nobl_mc_hwxyy.hex</em> - Hex file for use with bootloader, compiled with the MPLAB C18 compiler. Is created by opening and building the corresponding <em>"websrvr_nobl_mc_hwxyy.mcp"</em> MPLAB project file.</li></ul>
<p>
To create any of the above mentioned hex files, open its corresponding MPLAB project file (*.mcp) with <a class="el" href="tools.html#tools_mplab">MPLAB</a>, and click on the "Build All" toolbar button. This will compile and link the project, and create the hex file.<h2><a class="anchor" name="page_bootloader_identify_board">
Identifying the hardware version of a board</a></h2>
There are a couple of different hardware versions of the SBC68EC. The current version is hardare V2.21. The following is a complete list of all version boards, and information how to identify them:<p>
<ul>
<li><b>Hardware V2.21 with bootloader</b>: Label on front of board with "HW: V2.21". The PCB is marked "SBC65EC REV2", and is assembled with the PIC18F6680 chip. There are two small surface mount resistors soldered onto the back of the board, and space for a 8 pin surface mount chip (Ramtron FRAM). This board is programmed with the bootloader.</li></ul>
<p>
<ul>
<li><b>Hardware V2.21 without bootloader</b>: NO Label on front of board! The PCB is marked "SBC65EC REV2", and is assembled with the PIC18F6680 chip. There are two small surface mount resistors soldered onto the back of the board, and space for a 8 pin surface mount chip (Ramtron FRAM).</li></ul>
<p>
<ul>
<li><b>Hardware V1.20</b> without bootloader: NO Label on front of board! The PCB is marked "SBC65EC REV1", and is assembled with the PIC18F6680 chip. There are NO components on the back of the board. </li></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Oct 9 11:35:15 2006 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
